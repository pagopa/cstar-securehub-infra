alerts:
- key: get_initiative_id_5xx_alert
  category_path:
  - get_initiative_id_onboarding_service
  name: get-initiative-id-5xx-alert
  description: 'API Get Initiative ID: 5xx error count exceeded (> 2 in 5m)'
  query: |-
    AppRequests
    | where Name matches regex @"^GET /idpay-itn/onboarding/service/[^/]+$"
    | where ResultCode startswith "5"
  trigger:
    operator: GreaterThanOrEqual
    threshold: 2
  email_subject: '[PARI][UPBE][HIGH] Get Initiative ID API Alert (5xx)'
- key: get_initiative_id_400_alert
  category_path:
  - get_initiative_id_onboarding_service
  name: get-initiative-id-400-alert
  description: 'API Get Initiative ID: 400 error count exceeded (> 50 in 10m)'
  time_window: 10
  query: |-
    AppRequests
    | where Name matches regex @"^GET /idpay-itn/onboarding/service/[^/]+$"
    | where ResultCode == "400"
  trigger:
    operator: GreaterThanOrEqual
    threshold: 50
  email_subject: '[PARI][UPBE][HIGH] Get Initiative ID API Alert (400)'
- key: get_initiative_id_4xx_auth_alert
  category_path:
  - get_initiative_id_onboarding_service
  name: get-initiative-id-4xx-auth-alert
  description: 'API Get Initiative ID: 401/429 error count exceeded (> 5 in 5m)'
  query: |-
    AppRequests
    | where Name matches regex @"^GET /idpay-itn/onboarding/service/[^/]+$"
    | where ResultCode in ("401", "429")
  trigger:
    operator: GreaterThanOrEqual
    threshold: 5
  email_subject: '[PARI][UPBE][HIGH] Get Initiative ID API Alert (401/429)'
- key: get_initiative_detail_5xx_alert
  category_path:
  - get_initiative_detail_onboarding_service
  name: get-initiative-detail-5xx-alert
  description: 'API Get Initiative Detail: 5xx error count exceeded (> 2 in 5m)'
  query: |-
    AppRequests
    | where Name matches regex @"^GET /idpay-itn/onboarding/[^/]+/detail$"
    | where ResultCode startswith "5"
  trigger:
    operator: GreaterThanOrEqual
    threshold: 2
  email_subject: '[PARI][UPBE][HIGH] Get Initiative Detail API Alert (5xx)'
- key: get_initiative_detail_400_alert
  category_path:
  - get_initiative_detail_onboarding_service
  name: get-initiative-detail-400-alert
  description: 'API Get Initiative Detail: 400 error count exceeded (> 50 in 10m)'
  time_window: 10
  query: |-
    AppRequests
    | where Name matches regex @"^GET /idpay-itn/onboarding/[^/]+/detail$"
    | where ResultCode == "400"
  trigger:
    operator: GreaterThanOrEqual
    threshold: 50
  email_subject: '[PARI][UPBE][HIGH] Get Initiative Detail API Alert (400)'
- key: get_initiative_detail_4xx_auth_alert
  category_path:
  - get_initiative_detail_onboarding_service
  name: get-initiative-detail-4xx-auth-alert
  description: 'API Get Initiative Detail: 401/429 error count exceeded (> 5 in 5m)'
  query: |-
    AppRequests
    | where Name matches regex @"^GET /idpay-itn/onboarding/[^/]+/detail$"
    | where ResultCode in ("401", "429")
  trigger:
    operator: GreaterThanOrEqual
    threshold: 5
  email_subject: '[PARI][UPBE][HIGH] Get Initiative Detail API Alert (401/429)'
- key: save_onboarding_5xx_alert
  category_path:
  - save_onboarding
  name: save-onboarding-5xx-alert
  description: 'API Save Onboarding: 5xx error count exceeded (> 5 in 5m)'
  query: |-
    AppRequests
    | where Name == "PUT /idpay-itn/onboarding/"
    | where ResultCode startswith "5"
  trigger:
    operator: GreaterThanOrEqual
    threshold: 5
  email_subject: '[PARI][UPBE][HIGH] Save Onboarding API Alert (5xx)'
- key: save_onboarding_400_alert
  category_path:
  - save_onboarding
  name: save-onboarding-400-alert
  description: 'API Save Onboarding: 400 error count exceeded (> 50 in 10m)'
  time_window: 10
  query: |-
    AppRequests
    | where Name == "PUT /idpay-itn/onboarding/"
    | where ResultCode == "400"
  trigger:
    operator: GreaterThanOrEqual
    threshold: 50
  email_subject: '[PARI][UPBE][HIGH] Save Onboarding API Alert (400)'
- key: save_onboarding_4xx_auth_alert
  category_path:
  - save_onboarding
  name: save-onboarding-4xx-auth-alert
  description: 'API Save Onboarding: 401/429 error count exceeded (> 5 in 5m)'
  query: |-
    AppRequests
    | where Name == "PUT /idpay-itn/onboarding/"
    | where ResultCode in ("401", "429")
  trigger:
    operator: GreaterThanOrEqual
    threshold: 5
  email_subject: '[PARI][UPBE][HIGH] Save Onboarding API Alert (401/429)'
- key: onboarding_status_5xx_alert
  category_path:
  - onboarding_status
  name: onboarding-status-5xx-alert
  description: 'API Onboarding Status: 5xx error count exceeded (> 5 in 5m)'
  query: |-
    AppRequests
    | where Name matches regex @"^GET /idpay-itn/onboarding/[^/]+/status$"
    | where ResultCode startswith "5"
  trigger:
    operator: GreaterThanOrEqual
    threshold: 5
  email_subject: '[PARI][UPBE][HIGH] Onboarding Status API Alert (5xx)'
- key: onboarding_status_4xx_auth_alert
  category_path:
  - onboarding_status
  name: onboarding-status-4xx-auth-alert
  description: 'API Onboarding Status: 401/429 error count exceeded (> 5 in 5m)'
  query: |-
    AppRequests
    | where Name matches regex @"^GET /idpay-itn/onboarding/[^/]+/status$"
    | where ResultCode in ("401", "429")
  trigger:
    operator: GreaterThanOrEqual
    threshold: 5
  email_subject: '[PARI][UPBE][HIGH] Onboarding Status API Alert (401/429)'
- key: onboarding_initiative_user_status_5xx_alert
  category_path:
  - onboarding_initiative_user_status
  name: onboarding-initiative-user-status-5xx-alert
  description: 'API Onboarding Initiative User Status: 5xx error count exceeded (>
    2 in 5m)'
  query: |-
    AppRequests
    | where Name == "GET /idpay-itn/onboarding/user/initiative/status"
    | where ResultCode startswith "5"
  trigger:
    operator: GreaterThanOrEqual
    threshold: 2
  email_subject: '[PARI][UPBE][HIGH] Onboarding Initiative User Status API Alert (5xx)'
- key: onboarding_initiative_user_status_400_alert
  category_path:
  - onboarding_initiative_user_status
  name: onboarding-initiative-user-status-400-alert
  description: 'API Onboarding Initiative User Status: 400 error count exceeded (>
    50 in 10m)'
  time_window: 10
  query: |-
    AppRequests
    | where Name == "GET /idpay-itn/onboarding/user/initiative/status"
    | where ResultCode == "400"
  trigger:
    operator: GreaterThanOrEqual
    threshold: 50
  email_subject: '[PARI][UPBE][HIGH] Onboarding Initiative User Status API Alert (400)'
- key: onboarding_initiative_user_status_4xx_auth_alert
  category_path:
  - onboarding_initiative_user_status
  name: onboarding-initiative-user-status-4xx-auth-alert
  description: 'API Onboarding Initiative User Status: 401/429 error count exceeded
    (> 5 in 5m)'
  query: |-
    AppRequests
    | where Name == "GET /idpay-itn/onboarding/user/initiative/status"
    | where ResultCode in ("401", "429")
  trigger:
    operator: GreaterThanOrEqual
    threshold: 5
  email_subject: '[PARI][UPBE][HIGH] Onboarding Initiative User Status API Alert (401/429)'
